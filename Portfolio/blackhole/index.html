<!--
    Welcome to my website!
    If you're seeing this message on the dev console, 
    then you must be here to find which font I used.
    Feel free to grab that right below :D
    - Gavin_

    Hosted at: github.com/SilvRHat/gzimm4.github.io
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Blackh01e</title>
        <link rel="icon" href="../../favicon.ico">
        <link rel="stylesheet" href="../../style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300&family=Noto+Serif+JP:wght@300;400&family=Shippori+Mincho&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- HEADER -->
        <div class="navbar">
            <a class="home" href="../..">
                <h1>Gavin Zimmerman<img class='logo' src="../../img/logo.png"></h1>
                <h2>Technical Art · Direction // Programming</h2>
            </a>
            <div class="content">
                <div class="dropdown">
                    <a href=""><h3>Tech Art</h3></a>
                    <div class="dropdown-content">
                        <a href="../do-witchcraft/">Do Witchcraft</a><br>
                        <a href="../Ukiyo/">Project::Ukiyo「浮世」</a><br>
                        <a href="../grav-flux/">Gr@v:f/UX</a><br>
                        <a href="../blackhole/">BlackH01e</a><br>
                        <a href="../SPdr/">SP//dr_wbs</a><br>
                        <a href="../Ramen/">Tech·Katsu:Ramen</a><br>
                    </div>
                </div>
                <div class="dropdown">
                    <a href=""><h3>Project</h3></a>
                    <div class="dropdown-content">
                        <a href="../MvRE/">Mv:RE(Rendering Engine)</a><br>
                        <a href="../noir/">Noir~ Game</a><br>
                        <a href="../Diced/">Diced</a><br>
                        <a href="../light-stealer/">Light Stealer</a><br>
                    </div>
                </div>
                <div class="dropdown">
                    <a href="../../Profile/"><h3>Profile</h3></a>
                </div>
                <div class="dropdown">
                    <a href="../../Archive/"><h3>Archive</h3></a>
                </div>
            </div>
        </div>

        <!-- COVER -->
        <div class="cover-fit">
            <img src="cover.png">
            <div class="vert_title">
                <h2 style="color:white;">BlackH01e</h2>
            </div>
        </div>


        <!-- MAIN -->
        <div class="scroll">
            <!-- youtube -->
            <div class="content-2">
                <div class="info-box">
                    <h2>BlackH01e</h2>
                    <img><br>

                    <table style="text-align: center; margin: auto;">
                        <tr>
                            <td><strong>People:</strong></td>
                            <td><small>Gavin Zimmerman</small></td>
                        </tr>
                        <tr>
                            <td><strong>Timeline:</strong></td>
                            <td><small>May 2022</small></td>
                        </tr>
                        <tr>
                            <td><strong>Media:</strong></td>
                            <td><small>Tech Art Animation / Realtime</small></td>
                        </tr>
                        <tr>
                            <td><strong>Tech:</strong></td>
                            <td><small>Blender 3.1</small></td>
                        </tr>
                        <tr>
                            <td><strong>Link:</strong></td>
                            <td><small>N/A</small></td>
                        </tr>
                    </table>

                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#project">BlackH01e</a>
                            <ul>
                                <li><a href="#video">Video</a></li>
                                <li><a href="#background">Background</a></li>
                            </ul>
                        </li>
                        <li><a href="#breakdown">Breakdown</a>
                            <ul>
                                <li><a href="#hole">Black Hole</a></li>
                                <li><a href="#disk">Accretion Disk</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <h1 id="project">BlackH01e</h1>
                <div id="video" class="project-reel">
                    <iframe style="aspect-ratio: 560/315; width: 100%;" src="https://www.youtube.com/embed/RB1UQ1uTZAA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <br><br>

                <h2 id="background">Background</h2>
                This project was completed as part of a final for the "Black Holes" course at University of Colorado, Boulder taught by Professor Ann-Marie Madigan.
                This simulation was created to illustrate the effects of gravitational lensing and how accretion disks behave around a black hole.
                As a project for communicating characteristics of black holes and the science behind them, I've attached a brief blurb about black holes and the gravitational lensing effect.
                <br><br>
                Black holes are quite incredible cosmic objects of various immense sizes, throughout the universe. 
                These bodies are so massive and dense that the gravitational pull they exert even bends light. 
                Below whats known as the 'event horizon', light itself is not able to escape due to the immense gravity - which is why black holes appear black.
                Beyond the horizon gravity, less, but still very power bends light rays around the black hole producing a lensing effect.
                <br><br>
                From our perspective the area immediately surrounding the black hole has the most
                significant distortion bent along the curvature of its surface. By this effect, we are actually
                capable of seeing what is behind the black hole. 
                For example, the accretion disk which sometimes forms around a black hole is completely visible although part of it would normally be occluded by the black hole.
                
                These accretion disks are also interesting objects, made of highly energetic gas (plasma) and spin like rings around the black hole.
                The scale of these disks is variable and not every black hole may have one. However, when they do exist black holes are easy to identify in space.
                The lensing effect can also be utilized to identify these bodies, since the way in which black holes bend light will double the luminosity of starts behind them.

                <h1 id="breakdown">Breakdown</h1>
                I've attached a breakdown here for anyone else looking to create their own supermassive black hole effect.
                
                <br><br>
                <h2 id="hole">Black Hole</h2>
                The first part of this breakdown cover's the actual black hole object. 
                This object should create seemingly accurate light bending effects, as well as be very very dark in the middle.
                <br><br>
                I've seen a few approaches to this by other Blender artists, a classmate, a guest lecturer, and an unreal developer. 
                Needless to say many people enjoy black hole 3D projects.
                Most of these approaches all employed ray-tracing techniques, usually by adjusting the direction or velocity of the light ray in small increments.
                This is also the approach to dynamic and chaotic systems, which may use Runge-Kutta techniques for extremely precise calculations. 
                Depending on the platform technology this may involve coding your own tools to some degree.
                <br><br>
                Blender is capable of bending light rays multiple times, provided that cycles is the selected rendering engine.
                However, for my approach I wanted the black hole to be real time performant and use Blender's realtime engine 'Eevee', where light can only be bent or refracted once. 
                So to recreate the gravitational lensing effect, light could not curve around the hole but instead simply be bent towards the final location.
                <br><br>
                So that 3D objects in the scene could also appear distorted, Screen Space refractions were enabled.
                <br><br>
                <img src="img/ssr.png" style="width: 42%;">
                <p class="img-id">1</p>
                <img src="img/ssr2.png" style="width: 35%;">
                <p class="img-id">2</p>
                <br><br>
                <ol>
                    <li>SSR enabled in Rendering options</li>
                    <li>SSR enabled in Material options</li>
                    <li>Light refracting through glass</li>
                </ol>

                To perform light bending in Eevee, a Refraction BSDF shader is used to perform the necessary ray-tracing bounce internally.
                For context, when light passes through an object it refracts and is bent near/away from the normal depending on the index of refraction ratio between the mediums the light travels through.
                <br><br>
                <img src="https://upload.wikimedia.org/wikipedia/commons/8/85/Refraction_photo.png" style="width: 35%;">
                <p class="img-id">3</p>
                <br><br>
                Any 3D geometry can be used with the refraction shader. Planes combined with this shader are useful for post-processing filters in some use cases.
                For this case, a sphere is used since it looks the same from every angle and black hole's are already sphere like. 
                <br><br>
                <img src="img/sphere.png" style="width: 40%;">
                <p class="img-id">4</p>
                <br><br>
                <ol start="4">
                    <li>Geometry of black hole effect</li>
                </ol>
                Unfortunately, the normals on the sphere don't initially line up to bend light in the desired direction. 
                Normals on the edges face away from the viewing angle and cause light to bend a lot - where they should bend a little.
                Likewise, the normal in the center is parallel with the viewing angle and barely causes light to bend.
                <br><br>
                To flip that, the normals need to be recalculated so that they bend light inwards.
                If the Index of Refraction is less than 1, that would roughly look like:
                <br><br>
                <img class="img-border" src="img/light.png" style="width: 45%;">
                <p class="img-id">5</p>
                <img class="img-border" src="img/refract.png" style="width: 45%;">
                <p class="img-id">6</p>
                <br><br>
                <ol start="5">
                    <li>Desired light bending effect</li>
                    <li>Normal derivation for light bending effect</li>
                </ol>

                <!-- HERE -->
                This was done by rotating the existing normals by 90 degrees inwards towards the center of the sphere from where the camera was looking.
                To apply the correct rotation, the normals given in world-space coordinates were transformed to camera space coordinates. 
                In these coordinates the Z-axis aligns with the forward/out direction. 
                The cross product of this vector (0,0,1) and the initial normal give the axis for an axis-angle rotation towards the center.

                <br><br>
                <img src="img/n1.png" style="width: 60.7%;">
                <p class="img-id">7</p>
                <img src="img/ex1.png" style="width: 31%;">
                <p class="img-id">8</p>
                <br><br>
                <ol start="7">
                    <li>Desired light bending effect</li>
                    <li>Normal derivation for light bending effect</li>
                </ol>
                Next, well add some customization for how much light gets bent by manipulating the IOR.
                A fairly helpful calculation is the angle from the incoming vector. 
                This can be obtained with a dot product, followed by an arccosine function.
                Next with map the range [0, pi/2 (90deg)] to [0, 1] and apply a float curve, followed by an additional map range to the units of our desired IOR.
                The lower 'To min' parameter is customizable - although at some point the refracted angle becomes too steep and an inner circle forms; this param changes the radius of that.
                Notice below, how the edge of the sphere is now softer with the calculted IOR.
                <br><br>
                <img src="img/n2.png" style="width: 60%;">
                <img src="img/ex2.png" style="width: 30%;">
                <br><br>
                Finally, we add DARKNESS. A simple way of doing this is using the previously calculated angle to determine the distance of a pixel from the center of the circle by using a arctan function.
                This is a ratio of [0,1] where 0 = center and 1 = edge. Passed through a less-than functions gives a mask which can be used to mix the refraction shader with a black-diffuse or black-emission shader.
                <br><br>
                <img src="img/n3.png" style="width: 60%;">
                <img src="img/ex3.png" style="width: 30%;">
                <br><br>
                <h2 id="disk">Accretion Disk</h2>
                The accretion disk is simply a disk with a procedural texture on it.
                The first step is to create a rotated space around the center (left) of the sphere (middle). 
                Then pass in those coordinates to a noise function and masking out high values (right).
                <br><br>
                <img src="img/acc1.png" style="width: 30%;">
                <img src="img/acc2.png" style="width: 30%;">
                <img src="img/acc3.png" style="width: 30%;">
                <img src="img/n4.png" style="width: 90%;">
                <br><br>
                Notice, how scene time is used to offset the angle to rotate at so that over time the disk spins.
                However, we want the inner disk to spin faster than the outer disk (for physical accuracy).
                To do this we must chop up the disk into various layers or rings (like a tree-trunk). 
                If this was continuous the noise would just get super stretched as it goes inwards. We don't want this.
                <br><br>
                So we'll spin the rings in the center faster (multiply scene time by large value). Here I made a nodegroup,
                to abstract the complex spinning logic seperately.<br><br>
                <img src="img/acc4.png" style="width: 30%;">
                <img src="img/acc5.png" style="width: 30%;">
                <img src="img/acc6.png" style="width: 30%;">
                <img src="img/n5.png" style="width: 90%;">
                <br><br>
                Unfortunately, by discretizing the disks- it will look choppy and people will know just what we did there (escpecially when its moving).<br><br>
                <img src="img/acc7.png" style="width: 90%;">
                <br><br>
                The fix? Blend. A simple method is to create multiple segments where rings overlap. 
                This can be done in so many ways, and theres a smart way where you could offset to layers splitting and perform a soft less than
                so that the edges of each ring fade off slowly while the same coverage is maintained.
                Here, I just overlayed to layers and performed a smooth mimimum on the two.
                <br><br>
                <img src="img/acc8.png" style="width: 90%;">
                <br><br>
                Next we add color. There are also many ways to do this - but the scene is very simple shape wise. 
                I find that when the shapes are simple, simple color schemes pair well. 
                Specially, we'll push this as far as it can go by employing pure red (255,0,0) against black (0,0,0).
                <br><br>
                These colors have a HUGE contrast, which would not be as bold if you sampled various colors. Less = More.
                If you want to see something truly amazing google 
                <a target="_blank" href="https://www.google.com/search?q=red+anime&rlz=1C5CHFA_enUS817US817&sxsrf=ALiCzsbrtPvJ_JzW6iRE8s26Arpph7X2kg:1653278121959&source=lnms&tbm=isch&sa=X&ved=2ahUKEwiairL53PT3AhVDO30KHUn4B8gQ_AUoAXoECAEQAw&biw=1280&bih=605&dpr=2">red anime</a>.
                Notice, how many people have some to the same conclusion on this red-black color scheme.
                Here, I drew this from Evangelion which I'd say mastered the color red in their cels.<br><br>
                <img src="img/acc9.png" style="width: 90%;">
                <br><br>
                Next, we'll add a bit extra on the edges before passing this through the comparison operation.
                <br><br>
                <img src="img/acc10.png" style="width: 90%;">
                <img src="img/n6.png" style="width: 90%;">
                <br><br>
                Finally, its a tad violent at the center since stuff is spinning so fast. So, lets shift aroud the noise in the center.
                This will change the coordinates we used at the start and use a simple noise texture to offset the center.<br><br>
                <img src="img/n7.png" style="width: 90%;">
                <br><br><br>
                <2>Additional Resources</2>
                Where this fails, is that the disk doesn't have volume along the Z axis. 
                To fake this, you create a few layers of disks to add depth and in this situation I employed the technique from 
                <a href="https://lateasusual.com/b/tutorials/spiral_noise.html" target="_blank">lateasusual's first tutorial</a>. 
                Their <a href="https://lateasusual.com/b/tutorials/screen_space_ssr.html" target="_blank">second tutorial</a> 
                also does a great job touching on refraction.
                <br><br>
                Finally, a space background is always good for these types of projects. I found a great milky way panorama 
                <a target="_blank" src="https://www.eso.org/public/unitedkingdom/images/eso0932a/">here</a>, which can be used as an HDRI.
            </div>    
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <div class="social-links">
                <a href = "https://www.artstation.com/silvrhat/profile" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.29 68.46"><path d="M7162.88,7218.5a.87.87,0,0,0-.78,1.25c1.79,3.59,6.4,13.75,12.4,13.75H7217a.86.86,0,0,0,.74-1.31l-8-13.27a.86.86,0,0,0-.74-.42Z" transform="translate(-7162.01 -7165.04)" style="fill:#fff"/><path d="M7192.13,7166.6l37.73,65.79a.8.8,0,0,0,1.35,0c2.11-3.29,8.29-10.93,5.29-17.93-1.76-4.11-23.65-41.47-26-45-4-6-14.08-4.28-17.74-4.08A.79.79,0,0,0,7192.13,7166.6Z" transform="translate(-7162.01 -7165.04)" style="fill:#fff"/><path d="M7169,7206.5h31.91a.9.9,0,0,0,.78-1.35l-16.41-28.27a.9.9,0,0,0-1.57,0l-15.5,28.26A.9.9,0,0,0,7169,7206.5Z" transform="translate(-7162.01 -7165.04)" style="fill:#fff"/></svg></a>
                <a href = "https://github.com/SilvRHat" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.75 66.55"><path d="M7188.5,7241.12V7232a.38.38,0,0,0-.45-.37c-2,.4-10.21,1.58-13.55-5.1-3-6-3.17-4.17-6-7a3.1,3.1,0,0,1-1-2s0-4,5,0,4,5,7,7c2.61,1.74,7.48,1.21,8.71,1a.37.37,0,0,0,.32-.3c.24-1.4,2-5.74,3-5.74s-18.31-.06-20-17a20.94,20.94,0,0,1,4.8-15.79.36.36,0,0,0,0-.44c-.64-1-2.78-4.89.16-10.77,1-2,8.78,1.89,11.88,3.92a.32.32,0,0,0,.27,0c1.38-.32,12.38-2.74,21.71,0a.37.37,0,0,0,.27,0c1.21-.65,10.79-5.73,11.87-3.93,2.65,4.41.62,9.6.11,10.76a.38.38,0,0,0,.08.42c1.1,1.08,6.51,7.11,3.81,18.82-2.45,10.6-13,13.72-18.28,14a.38.38,0,0,0-.28.6,18.57,18.57,0,0,1,2.56,4.42c.91,2.72.17,14.47,0,16.65a.37.37,0,0,1-.37.35h-21.27A.38.38,0,0,1,7188.5,7241.12Z" transform="translate(-7167.5 -7174.95)" style="fill:#fff"/></svg></a>
                <a href = "https://www.linkedin.com/in/gavinzimmerman/" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73.69 73.49"><path d="M7203.91,7236.13H7188.7v-49h14.58v6.49l.19.06c.12-.15.27-.29.38-.45a15.34,15.34,0,0,1,11.38-7.16,22.76,22.76,0,0,1,10.2.86c4.76,1.5,7.67,4.82,9.21,9.45a34.16,34.16,0,0,1,1.56,10.66c.07,9.49.05,19,.06,28.49a5.15,5.15,0,0,1-.06.62H7221V7235c0-8.08,0-16.15,0-24.23a30,30,0,0,0-.61-5.76c-.73-3.67-3-5.52-6.74-5.72-2.85-.15-5.46.41-7.36,2.75a10,10,0,0,0-2.06,5.44c-.16,1.63-.26,3.27-.26,4.9,0,7.56,0,15.12,0,22.68Z" transform="translate(-7162.57 -7162.64)" style="fill:#fff"/><path d="M7163.86,7187.1H7179v49h-15.15Z" transform="translate(-7162.57 -7162.64)" style="fill:#fff"/><path d="M7171.43,7162.64a8.84,8.84,0,1,1-8.86,8.84A8.81,8.81,0,0,1,7171.43,7162.64Z" transform="translate(-7162.57 -7162.64)" style="fill:#fff"/></svg></a>
                <a href = "mailto: gzimm4@gmail.com" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 116 80"><polyline points="9 9 58 40 106 10" style="fill:none;stroke:#fff;stroke-miterlimit:10;stroke-width:10px"/><rect x="5" y="5" width="106" height="70" style="fill:none;stroke:#fff;stroke-miterlimit:10;stroke-width:10px"/></svg></a>
                <a href = "https://silvrship.dev/" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 124 62"><path d="M7178.92,7230.5h-9.42a31,31,0,0,1,0-62h9.82v15h-9.82a16,16,0,0,0,0,32h9.42v15Z" transform="translate(-7138.5 -7168.5)" style="fill:#fff"/><path d="M7231.5,7230.5h-13v-15h13a16,16,0,0,0,0-32h-13.4v-15h13.4a31,31,0,0,1,0,62Z" transform="translate(-7138.5 -7168.5)" style="fill:#fff"/><path d="M7231.5,7207h-65v-15h65Z" transform="translate(-7138.5 -7168.5)" style="fill:#fff"/></svg></a>
            </div>
            <div class="project-links">
                <a href="../do-witchcraft/">Do Witchcraft</a>
                <a href="../Ukiyo/">Project::Ukiyo「浮世」</a>
                <!--<a href="../Portfolio/Ramen/">Tech·Katsu:Ramen</a>-->
                <a href="../grav-flux/">Gr@v:f/UX</a>
                <a href="../blackhole/">BlackH01e</a>
                <a href="../SPdr/">SP//dr_wbs</a>
                <a href="../MvRE/">Mv:RE(Rendering Engine)</a>
            </div>
        </div>
    </body>
</html>