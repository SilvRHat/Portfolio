<!--
    Welcome to my website!
    If you're seeing this message on the dev console, 
    then you must be here to find which font I used.
    Feel free to grab that right below :D
    - Gavin_

    Hosted at: github.com/SilvRHat/gzimm4.github.io
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Gr@v:f\UX</title>
        <link rel="icon" href="../../favicon.ico">
        <link rel="stylesheet" href="../../style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300&family=Noto+Serif+JP:wght@300;400&family=Shippori+Mincho&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- HEADER -->
        <div class="navbar">
            <a class="home" href="../..">
                <h1>Gavin Zimmerman<img class='logo' src="../../img/logo.png"></h1>
                <h2>Technical Art · Direction // Programming</h2>
            </a>
            <div class="content">
                <div class="dropdown">
                    <a href=""><h3>Tech Art</h3></a>
                    <div class="dropdown-content">
                        <a href="../MvRE/">Project::Ukiyo「浮世」</a><br>
                        <a href="../grav-flux/">Gr@v:f/UX</a><br>
                        <a href="../blackhole/">BlackH01e</a><br>
                        <a href="../SPdr/">SP//dr_wbs</a><br>
                        <a href="../Ramen/">Tech·Katsu:Ramen</a><br>
                        <a href="../do-witchcraft/">Do WitchCraft</a>
                    </div>
                </div>
                <div class="dropdown">
                    <a href=""><h3>Project</h3></a>
                    <div class="dropdown-content">
                        <a href="../Ukyio/">Mv:RE(Rendering Engine)</a><br>
                        <a href="../noir/">Noir~ Game</a><br>
                        <a href="../Diced/">Diced</a><br>
                        <a href="../light-stealer/">Light Stealer</a><br>
                    </div>
                </div>
                <div class="dropdown">
                    <a href="../../Profile/"><h3>Profile</h3></a>
                </div>
                <div class="dropdown">
                    <a href="../../Archive/"><h3>Archive</h3></a>
                </div>
            </div>
        </div>

        <!-- COVER -->
        <div class="cover-fit">
            <img src="cover.png">
            <div class="vert_title">
                <h2 style="color:white;">Gr@v:f/UX</h2>
            </div>
        </div>


        <!-- MAIN -->
        <div class="scroll">
            <!-- youtube -->
            <div class="content-2">
                <div class="info-box">
                    <h2>Gr@v:f/UX</h2>
                    <img><br>

                    <table style="text-align: center; margin: auto;">
                        <tr>
                            <td><strong>Producers:</strong></td>
                            <td><small>Gavin Zimmerman</small></td>
                        </tr>
                        <tr>
                            <td><strong>Developed:</strong></td>
                            <td><small>Mar 2022 - Apr 2022</small></td>
                        </tr>
                        <tr>
                            <td><strong>Media:</strong></td>
                            <td><small>3D Scene; Realtime</small></td>
                        </tr>
                        <tr>
                            <td><strong>Tech:</strong></td>
                            <td><small>C, OpenGL, GLSL, 
                            <a href="../MvRE/" target="_blank">Mv:RE(Rendering Engine)</a>
                            </small></td>
                        </tr>
                        <tr>
                            <td><strong>Links:</strong></td>
                            <td><small><a href="https://github.com/SilvRHat/gr-v-f-UX" target="_blank">Github</small></td>
                        </tr>
                    </table>

                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#project">Gr@v:f/UX</a>
                            <ul>
                                <li><a href="#video">Video</a></li>
                                <li><a href="#about">README / About</a></li>
                            </ul>
                        </li>
                        <li><a href="#pipeline">Astroid Shader Pipeline</a>
                            <ul>
                                <li><a href="#vert">Vertex</a></li>
                                <li><a href="#tesc">Tesselation Control</a></li>
                                <li><a href="#tese">Tesselation Evaluation</a></li>
                                <li><a href="#geom">Geometry</a></li>
                                <li><a href="#frag">Fragment</a></li>
                            </ul>
                        </li>
                        <li><a href="#process">Process</a></li>
                    </ul>
                </div>
                <h1 id="project">Gr@v:f/UX</h1>
                <div id="video" class="project-reel">
                    <iframe style="aspect-ratio: 560/315; width: 100%;" src="https://www.youtube.com/embed/81cwdomLE28" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <br><br>
                <h1 id="about">README / About</h1>
                This was completed as part of the "Advanced Computer Graphics" course taught at University of Colorado, Boulder by Willem A. (Vlakkies) Schreüder.
                The project outline was to create a substantial creative project with OpenGL utilizing concepts from the course including:
                lighting, image processing stored textures/ noise, geometry/tesselation shaders, and procedural textures. 
                <br><br>
                All of which were done from scratch; 
                that is <strong>NO game engine, animation software, meshes, painted textures were used in the making of this gravitational field project.</strong>
                This project does utilize a custom rendering-pipeline framework developed off the OpenGL library, 
                which has a seperate <a href="../MvRE/" target="_blank">page</a> on my website.
                <br><br>
                Thus, the beauty of this project is the entire procedural creation of an asteroid field filled with unique asteroid geometry.
                Which I made, so that I could one day fire a laser whose path is unknown because the surrounding gravity is in all sorts of directions.
                <br><br>

                <h1 id="pipeline">Astroid Shader Pipeline</h1>
                I've provided an explanation of each step in the shader pipeline for the concepts behind this project. 
                Here I talk about the methods employeed, necessary optimizations, cautions to readers, and sublities of various techniques.
                This commentary is on the shader code here: <a href="https://github.com/SilvRHat/gr-v-f-UX/tree/master/shdr/AZ" target="_blank">AZtroid shader pipeline</a>.
                <br><br>

                <h2 id="vert">Vertex</h2>
                The idea behind creating a meteor is to 'layer' noise ontop of some existing geometry. 
                The noise essentially is some height extended along the normal of that existing geometry.
                <br><br>
                Thus, for this project all meteors first start off as an icosphere.
                The vertex shader simply passes all relevant information along in the shader pipeline.
                <br>
                This includes:
                <ul>
                    <li>Vertex Position (object-space position)</li>
                    <li>Model View Matrix</li>
                    <li>Normal Matrix</li>
                    <li>Vertex Normals</li>
                    <li>Size of Object (parameter)</li>
                    <li>Size of Overlaying Noise (parameter)</li>
                    <li>Object Position (parameter)</li>
                    <li>Instanced id</li>
                </ul>
                <br><br>

                <h2 id="tesc">Tesselation Control</h2>
                Now a bit more happens in the tesselation control shader.
                This is where extra detail is allocated (but not specified) on the icospheres. 
                Both the inner tess level and outer tess level are set to the same level of detail.<br><br>
                What is that level of detail? It depends on how much screen space the object is taking, thus it uses dynamic tesselation.
                To do so, we remap the distance*scale of an object to units of our tesselation level - and make sure the remap clamps these values.
                A curve is also applied during the remap, this is to better optimize the level of detail with customization on the falloff of detail.
                <br><br>
                Additional optimizations are also performed at this time, including camera culling. 
                If the object is not in view of the camera, then set its tess level to 0.
                We check this by calculating the NDC coords of an object's center and check if they are out of some range.
                <br><br>
                We can also cull some patches by their normal similar to backface culling. 
                Since we are extruding the geometry, not all backface patches now will remain that way - so we simply check if its an EXTRA backface patch (dot product > .6) which probabily will never be seen.
                <br><br>

                <h2 id="tese">Tesselation Evaluation</h2>
                Now a lot happens here.
                This is where the extra detail is specified, where we set the position of each vertex and identify the new vertex normals.
                The vertex position is fairly easy, what we do is apply some noise along the normals of our sphere.
                <br><br>
                Here I used a ridged-multifractal musgrave texture which gives nice ridges ironically.
                <br><br>
                Now real quick, I caution copying a glsl function of this noise blindly from the internet.
                The one I found worked amazingly well, but the loop setup was so obsure that the GPU should not perform loop unrolling.
                What I want readers to take away here, is that its useful to learn how shaders are compiled specifically to run fast,
                and how writing things certain ways will get in the way of powerful optimizations by the compiler.
                <br><br>
                For the musgrave texture, I changed up the lucanarity parameter to be less than 1. Why is this weird?
                Lucanity is the scale between octaces of the texture. So when its less than 1, the scale grows, which is not common in fBMs.
                Another obsurity is that the range of this particular noise function is not always bound between [0,1]. Below I showcase, the
                layering of multiple octaves to its full scale.
                <br><br>
                <img style="width: 30%;" src="img/az1.png">
                <img style="width: 30%;" src="img/az2.png">
                <img style="width: 30%;" src="img/az3.png">
                <img style="width: 30%;" src="img/az4.png">
                <img style="width: 30%;" src="img/az5.png">
                <img style="width: 30%;" src="img/az6.png">
                <br><br>
                A final note on this noise function, is that it uses simplex noise under the hood.
                Calculating noise from scratch is an expensive process, so instead of samplign 'true' simplex noise.
                We pass in a 3D texture of simplex noise for sampling instead. For sampling, we use the mirror repeat paramtere,
                so that is seems continuous no matter where we sample. However, this can cause 'mirroring' so the scale of this noise
                should be different than the scale/positioning of the asteroids.
                <br><br>
                Now onto normals. There's not really a derivative or mathmatical way to do this. 
                For this, we can implement something similar to Gouraud Shading. 
                We sample around the vertex and calculate normals of various triangles from these sampled points. 
                Then, we average those normals for a final vertex normal.
                <br><br>
                This step has two parameters, vertices to sample and distance away of sample. Both are magic numbers.
                The more samples means finer precision but more expensive computation. The larger the distance means
                smoother surfaces.
                <br><br>
                These are then calculated in NDC space and passed onto the geometry shader. 
                Along with all other information needed by the fragment shader.

                <h2 id="geom">Geometry</h2>
                The geometry shader simply does nothing useful. 
                I've included this step here, because it was useful early in tesselation to recalculate the normals. 
                This would allow a clear different between triangles which was useful in ensuring previous stages/ early work was correct.
                <br><br>

                <h2 id="frag">Fragment</h2>
                The fragment shader is very simple.<br>
                A lighting calculation is performed by a dot product on the light offset vector and normal.
                It is then multiplied by the asteroid diffuse color. 
                Then, the colors are down-sampled so that there are only 3 colors for meteors.<br><br>
                Afterwards, blue is added using a fresnel effect for flare. 
                Then noise and a red-hue are applied in a post-processing step.
                <br><br>
                This was to emulate cel-shading, or the look of traditional animation. 
                Traditional animation was limited to very few colors (a couple hundred all-together), which drove this unique style.
                <br><br>

                <h1 id="process">Process</h1>
                Along the development of this project, I took a few recordings which document the process. I've included them below.
                As the project got more and more developed, the video naming scheme got more and more obscure.
                <br><br>

                <h3>"Reactive Tesselation"</h3>
                <video controls width="80%;" src="img/reactive-tesselation.mov"></video>
                <br><br>

                <h3>"Mr. Meteor"</h3>
                <video controls width="80%;" src="img/mr.meteor.mov"></video>
                <br><br>

                <h3>"Fluffy Aztroid"</h3>
                <video controls width="80%;" src="img/fluffy-aztroid.mov"></video>
                <br><br>

                <h3>"Aztroid Power"</h3>
                <video controls width="80%;" src="img/Aztroid-power.mov"></video>
                <br><br>

                <h3>"Aztroid But Fire"</h3>
                <video controls width="80%;" src="img/aztroid-but-fire.mov"></video>
                <br><br>

                Knowing enough about normals, to turn any geometry into fire is a powerful ability I have come to realize.
            </div>    
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <div class="social-links">
                <a href = "https://www.artstation.com/silvrhat/profile" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.29 68.46"><path d="M7162.88,7218.5a.87.87,0,0,0-.78,1.25c1.79,3.59,6.4,13.75,12.4,13.75H7217a.86.86,0,0,0,.74-1.31l-8-13.27a.86.86,0,0,0-.74-.42Z" transform="translate(-7162.01 -7165.04)" style="fill:#fff"/><path d="M7192.13,7166.6l37.73,65.79a.8.8,0,0,0,1.35,0c2.11-3.29,8.29-10.93,5.29-17.93-1.76-4.11-23.65-41.47-26-45-4-6-14.08-4.28-17.74-4.08A.79.79,0,0,0,7192.13,7166.6Z" transform="translate(-7162.01 -7165.04)" style="fill:#fff"/><path d="M7169,7206.5h31.91a.9.9,0,0,0,.78-1.35l-16.41-28.27a.9.9,0,0,0-1.57,0l-15.5,28.26A.9.9,0,0,0,7169,7206.5Z" transform="translate(-7162.01 -7165.04)" style="fill:#fff"/></svg></a>
                <a href = "https://github.com/SilvRHat" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.75 66.55"><path d="M7188.5,7241.12V7232a.38.38,0,0,0-.45-.37c-2,.4-10.21,1.58-13.55-5.1-3-6-3.17-4.17-6-7a3.1,3.1,0,0,1-1-2s0-4,5,0,4,5,7,7c2.61,1.74,7.48,1.21,8.71,1a.37.37,0,0,0,.32-.3c.24-1.4,2-5.74,3-5.74s-18.31-.06-20-17a20.94,20.94,0,0,1,4.8-15.79.36.36,0,0,0,0-.44c-.64-1-2.78-4.89.16-10.77,1-2,8.78,1.89,11.88,3.92a.32.32,0,0,0,.27,0c1.38-.32,12.38-2.74,21.71,0a.37.37,0,0,0,.27,0c1.21-.65,10.79-5.73,11.87-3.93,2.65,4.41.62,9.6.11,10.76a.38.38,0,0,0,.08.42c1.1,1.08,6.51,7.11,3.81,18.82-2.45,10.6-13,13.72-18.28,14a.38.38,0,0,0-.28.6,18.57,18.57,0,0,1,2.56,4.42c.91,2.72.17,14.47,0,16.65a.37.37,0,0,1-.37.35h-21.27A.38.38,0,0,1,7188.5,7241.12Z" transform="translate(-7167.5 -7174.95)" style="fill:#fff"/></svg></a>
                <a href = "https://www.linkedin.com/in/gavinzimmerman/" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73.69 73.49"><path d="M7203.91,7236.13H7188.7v-49h14.58v6.49l.19.06c.12-.15.27-.29.38-.45a15.34,15.34,0,0,1,11.38-7.16,22.76,22.76,0,0,1,10.2.86c4.76,1.5,7.67,4.82,9.21,9.45a34.16,34.16,0,0,1,1.56,10.66c.07,9.49.05,19,.06,28.49a5.15,5.15,0,0,1-.06.62H7221V7235c0-8.08,0-16.15,0-24.23a30,30,0,0,0-.61-5.76c-.73-3.67-3-5.52-6.74-5.72-2.85-.15-5.46.41-7.36,2.75a10,10,0,0,0-2.06,5.44c-.16,1.63-.26,3.27-.26,4.9,0,7.56,0,15.12,0,22.68Z" transform="translate(-7162.57 -7162.64)" style="fill:#fff"/><path d="M7163.86,7187.1H7179v49h-15.15Z" transform="translate(-7162.57 -7162.64)" style="fill:#fff"/><path d="M7171.43,7162.64a8.84,8.84,0,1,1-8.86,8.84A8.81,8.81,0,0,1,7171.43,7162.64Z" transform="translate(-7162.57 -7162.64)" style="fill:#fff"/></svg></a>
                <a href = "mailto: gzimm4@gmail.com" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 116 80"><polyline points="9 9 58 40 106 10" style="fill:none;stroke:#fff;stroke-miterlimit:10;stroke-width:10px"/><rect x="5" y="5" width="106" height="70" style="fill:none;stroke:#fff;stroke-miterlimit:10;stroke-width:10px"/></svg></a>
                <a href = "https://silvrship.dev/" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 124 62"><path d="M7178.92,7230.5h-9.42a31,31,0,0,1,0-62h9.82v15h-9.82a16,16,0,0,0,0,32h9.42v15Z" transform="translate(-7138.5 -7168.5)" style="fill:#fff"/><path d="M7231.5,7230.5h-13v-15h13a16,16,0,0,0,0-32h-13.4v-15h13.4a31,31,0,0,1,0,62Z" transform="translate(-7138.5 -7168.5)" style="fill:#fff"/><path d="M7231.5,7207h-65v-15h65Z" transform="translate(-7138.5 -7168.5)" style="fill:#fff"/></svg></a>
            </div>
            <div class="project-links">
                <a href="../Ukiyo/">Project::Ukiyo「浮世」</a>
                <!--<a href="../Portfolio/Ramen/">Tech·Katsu:Ramen</a>-->
                <a href="../grav-flux/">Gr@v:f/UX</a>
                <a href="../blackhole/">BlackH01e</a>
                <a href="../SPdr/">SP//dr_wbs</a>
                <a href="../MvRE/">Mv:RE(Rendering Engine)</a>
            </div>
        </div>

    </body>
</html>